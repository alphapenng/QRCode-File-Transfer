# å‘é€ç«¯ UI ä½¿ç”¨æŒ‡å—

## æ¦‚è¿°

æœ¬æ–‡æ¡£ä»‹ç»å‘é€ç«¯ UI çš„åŠŸèƒ½ã€ä½¿ç”¨æ–¹æ³•å’Œå®ç°ç»†èŠ‚ã€‚

**æ–‡ä»¶**: `src/renderer/src/components/layout/SenderLayout.jsx`

**åŠŸèƒ½**:
- æ–‡ä»¶é€‰æ‹©
- æ–‡ä»¶ä¿¡æ¯æ˜¾ç¤º
- ä¼ è¾“æ§åˆ¶
- äºŒç»´ç æ˜¾ç¤º
- è¿›åº¦è·Ÿè¸ª

---

## ğŸ¨ ç•Œé¢å¸ƒå±€

### æ•´ä½“ç»“æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    æ–‡ä»¶é€‰æ‹©å¡ç‰‡         â”‚    äºŒç»´ç æ˜¾ç¤ºåŒºåŸŸ        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                         â”‚
â”‚    ä¼ è¾“æ§åˆ¶å¡ç‰‡         â”‚                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å·¦ä¾§åŒºåŸŸ

#### 1. æ–‡ä»¶é€‰æ‹©å¡ç‰‡
- **é€‰æ‹©æ–‡ä»¶æŒ‰é’®**: æ‰“å¼€æ–‡ä»¶é€‰æ‹©å¯¹è¯æ¡†
- **æ–‡ä»¶ä¿¡æ¯æ˜¾ç¤º**:
  - æ–‡ä»¶å
  - æ–‡ä»¶å¤§å°ï¼ˆKBï¼‰
  - æ–‡ä»¶ç±»å‹å¾½ç« 
  - æ–‡ä»¶è·¯å¾„

#### 2. ä¼ è¾“æ§åˆ¶å¡ç‰‡
- **çŠ¶æ€å¾½ç« **: æ˜¾ç¤ºå½“å‰ä¼ è¾“çŠ¶æ€
- **è¿›åº¦æ¡**: æ˜¾ç¤ºä¼ è¾“è¿›åº¦ç™¾åˆ†æ¯”
- **åˆ†ç‰‡è®¡æ•°**: æ˜¾ç¤ºå·²å‘é€/æ€»åˆ†ç‰‡æ•°
- **é”™è¯¯æç¤º**: æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯ï¼ˆå¦‚æœæœ‰ï¼‰
- **æ§åˆ¶æŒ‰é’®**: æ ¹æ®çŠ¶æ€æ˜¾ç¤ºä¸åŒæŒ‰é’®

### å³ä¾§åŒºåŸŸ

#### äºŒç»´ç æ˜¾ç¤ºåŒºåŸŸ
- **ç©ºé—²çŠ¶æ€**: æ˜¾ç¤ºäºŒç»´ç å›¾æ ‡å’Œæç¤º
- **å‡†å¤‡ä¸­**: æ˜¾ç¤ºåŠ è½½åŠ¨ç”»
- **å‘é€ä¸­**: æ˜¾ç¤ºå®æ—¶äºŒç»´ç 
- **æš‚åœ**: æ˜¾ç¤ºæš‚åœé®ç½©
- **å®Œæˆ**: æ˜¾ç¤ºæˆåŠŸå›¾æ ‡
- **é”™è¯¯**: æ˜¾ç¤ºé”™è¯¯å›¾æ ‡å’Œä¿¡æ¯

---

## ğŸ”„ çŠ¶æ€ç®¡ç†

### ä¼ è¾“çŠ¶æ€

å‘é€ç«¯æœ‰ 6 ç§çŠ¶æ€ï¼š

1. **idleï¼ˆç©ºé—²ï¼‰**
   - åˆå§‹çŠ¶æ€
   - å¯ä»¥é€‰æ‹©æ–‡ä»¶
   - æ˜¾ç¤º"å¼€å§‹ä¼ è¾“"æŒ‰é’®

2. **preparingï¼ˆå‡†å¤‡ä¸­ï¼‰**
   - æ­£åœ¨é¢„å¤„ç†æ–‡ä»¶
   - æ˜¾ç¤ºåŠ è½½åŠ¨ç”»
   - æŒ‰é’®ç¦ç”¨

3. **sendingï¼ˆå‘é€ä¸­ï¼‰**
   - æ­£åœ¨å‘é€äºŒç»´ç 
   - æ˜¾ç¤ºå®æ—¶äºŒç»´ç 
   - æ˜¾ç¤º"æš‚åœ"å’Œ"å–æ¶ˆ"æŒ‰é’®

4. **pausedï¼ˆå·²æš‚åœï¼‰**
   - ä¼ è¾“å·²æš‚åœ
   - äºŒç»´ç æ˜¾ç¤ºæš‚åœé®ç½©
   - æ˜¾ç¤º"ç»§ç»­"å’Œ"å–æ¶ˆ"æŒ‰é’®

5. **completedï¼ˆå·²å®Œæˆï¼‰**
   - ä¼ è¾“æˆåŠŸå®Œæˆ
   - æ˜¾ç¤ºæˆåŠŸå›¾æ ‡
   - æ˜¾ç¤º"å‘é€æ–°æ–‡ä»¶"æŒ‰é’®

6. **errorï¼ˆé”™è¯¯ï¼‰**
   - ä¼ è¾“è¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯
   - æ˜¾ç¤ºé”™è¯¯å›¾æ ‡å’Œä¿¡æ¯
   - æ˜¾ç¤º"é‡è¯•"æŒ‰é’®

### çŠ¶æ€è½¬æ¢

```
idle â†’ preparing â†’ sending â†’ completed
                      â†“
                   paused â†’ sending
                      â†“
                   error
```

---

## ğŸ¯ åŠŸèƒ½å®ç°

### 1. æ–‡ä»¶é€‰æ‹©

**è§¦å‘**: ç‚¹å‡»"é€‰æ‹©æ–‡ä»¶"æŒ‰é’®

**æµç¨‹**:
1. è°ƒç”¨ `window.electronAPI.file.select()`
2. æ˜¾ç¤ºæ–‡ä»¶é€‰æ‹©å¯¹è¯æ¡†
3. ç”¨æˆ·é€‰æ‹©æ–‡ä»¶
4. æ›´æ–° `selectedFile` çŠ¶æ€
5. æ˜¾ç¤ºæ–‡ä»¶ä¿¡æ¯

**æ”¯æŒçš„æ–‡ä»¶ç±»å‹**:
- æ‰€æœ‰æ–‡ä»¶ (*)
- æ–‡æœ¬æ–‡ä»¶ (.txt, .md, .json)
- Office æ–‡æ¡£ (.doc, .docx, .xls, .xlsx, .ppt, .pptx)
- å›¾ç‰‡ (.jpg, .jpeg, .png, .gif)
- PDF (.pdf)

**æ–‡ä»¶å¤§å°é™åˆ¶**: æœ€å¤§ 1MB

---

### 2. å¼€å§‹ä¼ è¾“

**è§¦å‘**: ç‚¹å‡»"å¼€å§‹ä¼ è¾“"æŒ‰é’®

**å‰ææ¡ä»¶**:
- å·²é€‰æ‹©æ–‡ä»¶
- çŠ¶æ€ä¸º idle

**æµç¨‹**:
1. çŠ¶æ€å˜ä¸º preparing
2. è°ƒç”¨ `senderService.send(filePath, canvas)`
3. æœåŠ¡å¼€å§‹é¢„å¤„ç†æ–‡ä»¶
4. çŠ¶æ€å˜ä¸º sending
5. å¼€å§‹æ’­æ”¾äºŒç»´ç 

**æœåŠ¡é›†æˆ**:
```javascript
await senderServiceRef.current.send(selectedFile.path, canvasRef.current);
```

---

### 3. æš‚åœä¼ è¾“

**è§¦å‘**: ç‚¹å‡»"æš‚åœ"æŒ‰é’®

**æµç¨‹**:
1. è°ƒç”¨ `senderService.pause()`
2. çŠ¶æ€å˜ä¸º paused
3. äºŒç»´ç æ’­æ”¾æš‚åœ
4. æ˜¾ç¤ºæš‚åœé®ç½©

---

### 4. æ¢å¤ä¼ è¾“

**è§¦å‘**: ç‚¹å‡»"ç»§ç»­"æŒ‰é’®

**æµç¨‹**:
1. è°ƒç”¨ `senderService.resume()`
2. çŠ¶æ€å˜ä¸º sending
3. ç»§ç»­æ’­æ”¾äºŒç»´ç 

---

### 5. å–æ¶ˆä¼ è¾“

**è§¦å‘**: ç‚¹å‡»"å–æ¶ˆ"æŒ‰é’®

**æµç¨‹**:
1. è°ƒç”¨ `senderService.cancel()`
2. çŠ¶æ€å˜ä¸º idle
3. æ¸…ç©ºè¿›åº¦å’ŒäºŒç»´ç 
4. ä¿ç•™å·²é€‰æ‹©çš„æ–‡ä»¶

---

### 6. é‡ç½®ï¼ˆä¼ è¾“å®Œæˆåï¼‰

**è§¦å‘**: ç‚¹å‡»"å‘é€æ–°æ–‡ä»¶"æŒ‰é’®

**æµç¨‹**:
1. çŠ¶æ€å˜ä¸º idle
2. æ¸…ç©ºæ‰€æœ‰æ•°æ®
3. å¯ä»¥é€‰æ‹©æ–°æ–‡ä»¶

---

## ğŸ“Š è¿›åº¦æ˜¾ç¤º

### è¿›åº¦ä¿¡æ¯

- **ç™¾åˆ†æ¯”**: 0-100%
- **åˆ†ç‰‡è®¡æ•°**: å·²å‘é€/æ€»åˆ†ç‰‡æ•°
- **ä¼ è¾“é€Ÿåº¦**: 10 å¸§/ç§’
- **é¢„è®¡å‰©ä½™æ—¶é—´**: æ ¹æ®å‰©ä½™åˆ†ç‰‡è®¡ç®—

### è¿›åº¦æ›´æ–°

é€šè¿‡ç›‘å¬ `progress` äº‹ä»¶ï¼š

```javascript
senderServiceRef.current.on('progress', (progressData) => {
  setProgress(progressData.percentage);
  setCurrentChunk(progressData.currentChunk);
  setTotalChunks(progressData.totalChunks);
});
```

---

## ğŸ–¼ï¸ äºŒç»´ç æ˜¾ç¤º

### äºŒç»´ç æ›´æ–°

é€šè¿‡ç›‘å¬ `qrcode` äº‹ä»¶ï¼š

```javascript
senderServiceRef.current.on('qrcode', (dataUrl) => {
  setQrcodeDataUrl(dataUrl);
});
```

### æ˜¾ç¤ºæ–¹å¼

```jsx
<img 
  src={qrcodeDataUrl} 
  alt="QR Code" 
  className="w-full h-auto max-w-md mx-auto"
/>
```

### æ’­æ”¾é€Ÿåº¦

- **é»˜è®¤**: 10 å¸§/ç§’
- **å¯é…ç½®**: é€šè¿‡ SenderService é€‰é¡¹

---

## âš ï¸ é”™è¯¯å¤„ç†

### é”™è¯¯ç±»å‹

1. **æ–‡ä»¶é€‰æ‹©é”™è¯¯**
   - ç”¨æˆ·å–æ¶ˆé€‰æ‹©
   - æ–‡ä»¶ä¸å­˜åœ¨
   - æƒé™ä¸è¶³

2. **ä¼ è¾“é”™è¯¯**
   - æ–‡ä»¶è¯»å–å¤±è´¥
   - é¢„å¤„ç†å¤±è´¥
   - äºŒç»´ç ç”Ÿæˆå¤±è´¥

### é”™è¯¯æ˜¾ç¤º

```jsx
{errorMessage && (
  <Alert variant="destructive">
    <AlertTitle>é”™è¯¯</AlertTitle>
    <AlertDescription>{errorMessage}</AlertDescription>
  </Alert>
)}
```

### é”™è¯¯æ¢å¤

- æ˜¾ç¤º"é‡è¯•"æŒ‰é’®
- ç‚¹å‡»åé‡ç½®çŠ¶æ€
- å¯ä»¥é‡æ–°é€‰æ‹©æ–‡ä»¶

---

## ğŸ¨ UI ç»„ä»¶

### ä½¿ç”¨çš„ç»„ä»¶

- **Card**: å¡ç‰‡å®¹å™¨
- **Button**: æ“ä½œæŒ‰é’®
- **Progress**: è¿›åº¦æ¡
- **Badge**: çŠ¶æ€å¾½ç« 
- **Alert**: é”™è¯¯æç¤º

### å›¾æ ‡

ä½¿ç”¨å†…è” SVG å›¾æ ‡ï¼š
- ä¸Šä¼ å›¾æ ‡ï¼ˆé€‰æ‹©æ–‡ä»¶ï¼‰
- æ’­æ”¾å›¾æ ‡ï¼ˆå¼€å§‹/ç»§ç»­ï¼‰
- æš‚åœå›¾æ ‡ï¼ˆæš‚åœï¼‰
- å–æ¶ˆå›¾æ ‡ï¼ˆå–æ¶ˆï¼‰
- åŠ è½½å›¾æ ‡ï¼ˆå‡†å¤‡ä¸­ï¼‰
- æˆåŠŸå›¾æ ‡ï¼ˆå®Œæˆï¼‰
- é”™è¯¯å›¾æ ‡ï¼ˆé”™è¯¯ï¼‰

---

## ğŸ“ ä½¿ç”¨ç¤ºä¾‹

### åŸºæœ¬ä½¿ç”¨

```jsx
import { SenderLayout } from '@/components/layout';

function SenderPage() {
  return <SenderLayout />;
}
```

### åœ¨ App ä¸­ä½¿ç”¨

```jsx
import { MainLayout, AppTabs } from '@/components/layout';

function App() {
  return (
    <MainLayout>
      <AppTabs />
    </MainLayout>
  );
}
```

---

## ğŸ”§ æœåŠ¡é›†æˆ

### SenderService

**æ–‡ä»¶**: `src/renderer/src/services/senderIPCService.js`

**æ–¹æ³•**:
- `send(filePath, canvas)` - å¼€å§‹å‘é€
- `pause()` - æš‚åœå‘é€
- `resume()` - æ¢å¤å‘é€
- `cancel()` - å–æ¶ˆå‘é€
- `getState()` - è·å–çŠ¶æ€
- `getProgress()` - è·å–è¿›åº¦

**äº‹ä»¶**:
- `stateChange` - çŠ¶æ€å˜åŒ–
- `progress` - è¿›åº¦æ›´æ–°
- `qrcode` - äºŒç»´ç æ›´æ–°
- `complete` - ä¼ è¾“å®Œæˆ
- `error` - å‘ç”Ÿé”™è¯¯

---

## ğŸ’¡ æœ€ä½³å®è·µ

1. **æ–‡ä»¶å¤§å°æ£€æŸ¥**
   - åœ¨é€‰æ‹©æ–‡ä»¶åæ£€æŸ¥å¤§å°
   - è¶…è¿‡é™åˆ¶æ—¶æ˜¾ç¤ºè­¦å‘Š

2. **ç”¨æˆ·åé¦ˆ**
   - åŠæ—¶æ›´æ–°çŠ¶æ€
   - æ˜¾ç¤ºè¯¦ç»†çš„è¿›åº¦ä¿¡æ¯
   - æä¾›æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯

3. **èµ„æºæ¸…ç†**
   - ç»„ä»¶å¸è½½æ—¶å–æ¶ˆä¼ è¾“
   - æ¸…ç†äº‹ä»¶ç›‘å¬å™¨

4. **é”™è¯¯æ¢å¤**
   - æä¾›é‡è¯•é€‰é¡¹
   - ä¿ç•™ç”¨æˆ·é€‰æ‹©çš„æ–‡ä»¶

---

## ğŸ“– å‚è€ƒèµ„æº

- **SenderService æ–‡æ¡£**: `docs/sender-ipc-service-guide.md`
- **å¸ƒå±€è®¾è®¡æ–‡æ¡£**: `docs/layout-design-guide.md`
- **shadcn/ui æ–‡æ¡£**: `docs/shadcn-ui-components-guide.md`

---

**æœ€åæ›´æ–°**: 2025-10-06 19:00

